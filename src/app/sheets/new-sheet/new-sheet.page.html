<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button href="/">
        <ion-icon slot="icon-only" name="home"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>New Sheet Creation Page</ion-title>
    <ion-buttons slot="primary">
      <ion-button color="secondary">
        <ion-icon slot="icon-only" ios="ellipsis-horizontal" md="ellipsis-vertical"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>


  <ion-grid>
    <ion-row align-items-center>
      <ion-col size=9>
        <h2>Folha de Obra nº{{sheet.id}}
        </h2>
      </ion-col>
      <ion-col size=3>
        <img item-right
          src="https://firebasestorage.googleapis.com/v0/b/base-6c464.appspot.com/o/logo_mafepre.png?alt=media&token=0d2584bf-d3c8-4333-b98f-8d3bbd6c4d60">
      </ion-col>
    </ion-row>
  </ion-grid>





  <ion-card>
    <ion-card-content>
      <!--  <div class="noprint">
    <ion-button block color="danger" (click)="toggleDone()" *ngIf="!sheet.isDone">Não Concluido</ion-button>
    <ion-button block color="success" (click)="toggleDone()" *ngIf="sheet.isDone">Concluido</ion-button>
  </div> -->
      <ion-grid>

        <ion-row>
          <ion-col size="12" size-md="9">
            <ion-item>
              <ion-label position="floating">Cliente</ion-label>
              <ion-input type="text" [(ngModel)]="sheet.customer.name"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Morada</ion-label>
              <ion-input type="text" [(ngModel)]="sheet.customer.address"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Salesman</ion-label>
              <ion-input type="text" [(ngModel)]="sheet.customer.salesman"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-md="3">
            <ion-item>
              <ion-label position="floating">Received Date</ion-label>
              <ion-input type="text" [value]="sheet.receivedDate | date: short" clearInput>
              </ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Initial Date</ion-label>
              <ion-input type="text" [value]="sheet.initialDate | date: short" (ngModel)="sheet.initialDate" clearInput></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Finish Date</ion-label>
              <ion-input type="text" [value]="sheet.finalizedDate | date: short" (ngModel)="sheet.finalizedDate" clearInput>
              </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>

    </ion-card-content>
  </ion-card>





  <ion-card>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="2">
            <ion-item>
              <ion-label position="floating">ServiceType
                <ion-icon name="build-outline" *ngIf="sheet.serviceType === 'Repair'"></ion-icon>
                <ion-icon name="construct-outline" *ngIf="sheet.serviceType === 'Assistance'"></ion-icon>
              </ion-label>
              <ion-select [(ngModel)]="sheet.serviceType">
                <ion-select-option value="Repair">Repair</ion-select-option>
                <ion-select-option value="Assistance">Assistance</ion-select-option>
              </ion-select>
            </ion-item>

          </ion-col>
          <ion-col size="12" size-md="2">
            <ion-item>
              <ion-label position="floating">Product Brand</ion-label>
              <ion-input type="text" [(ngModel)]="sheet.product.brand"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-md="5">
            <ion-item>
              <ion-label position="floating">Product Model</ion-label>
              <ion-input type="text" [(ngModel)]="sheet.product.model"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-md="3">
            <ion-item>
              <ion-checkbox slot="end" color="primary" [(ngModel)]='sheet.executedAtTheCustomer'></ion-checkbox>
              <ion-label>At the customer?</ion-label>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" size-md="3" offset="1">
            <ion-item>
              <ion-checkbox slot="start" [(ngModel)]="sheet.costEstimation.isRequired"></ion-checkbox>
              <ion-label>Budget?</ion-label>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>

    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label position="floating">Description</ion-label>
              <ion-textarea rows="1" type="text" [(ngModel)]="sheet.description"></ion-textarea>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label position="floating" *ngIf="!sheet.costEstimation.isRequired">Parts applied</ion-label>
              <ion-label position="floating" *ngIf="sheet.costEstimation.isRequired">Parts to apply</ion-label>
              <ion-textarea rows="6" type="text" [(ngModel)]="sheet.partsListApplied"></ion-textarea>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label floating>Observações</ion-label>
              <ion-textarea rows="2" type="text" [(ngModel)]="sheet.observations"></ion-textarea>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>

    </ion-card-content>
  </ion-card>

  <div class="noprint">
    <ion-button expand="block" color="primary" [disabled]="validateSheet()" (click)="save()">Guardar</ion-button>
  </div>



</ion-content>